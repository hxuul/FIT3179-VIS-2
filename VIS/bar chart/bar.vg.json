{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "Pie chart showing the distribution of Male, Female, and Other using external data.",
    
    "width": 700,
    "height": 750,

    "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/VIS/bar%20chart/payment_duration.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Australian Capital Territory"
  
  }
  