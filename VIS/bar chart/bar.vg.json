{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "Pie chart showing the distribution of Male, Female, and Other using external data.",
    
    "width": 700,
    "height": 750,
    
  
    "hconcat": [
      
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/Australian%20Capital%20Territory_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Australian Capital Territory"
      },
      
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/Northern%20Territory_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Northern Territory"
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/Queensland_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Queensland"
      },
      
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/New%20South%20Wales_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "New South Wales"
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/Australia_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Australia"
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/Victoria_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Victoria"
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/South%20Australia_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "South Australia"
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/Tasmania_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Tasmania"
      },
      
      {
        "data": {
          "url": "https://raw.githubusercontent.com/hxuul/FIT3179-VIS-2/refs/heads/main/Pie%20Chart/Western%20Australia_data.csv"
        },
        "transform": [
          {
            "fold": ["Male", "Female"],
            "as": ["Gender", "value"]
          },
          {
            "filter": "datum['Payment type'] == payment_type_selection"
          },
          {
            "window": [{"op": "sum", "field": "value", "as": "TotalValue"}],
            "frame": [null, null]
          },
          {
            "calculate": "datum.value / datum.TotalValue * 100",
            "as": "Percentage"
          }
        ],
        "mark": {"type": "arc"},
        "encoding": {
          "theta": {"field": "value", "type": "quantitative"},
          "color": {
            "field": "Gender",
            "type": "nominal",
            "scale": {"range": ["#87CEFA", "#FFB6C1"]}
          },
          "tooltip": [
            {"field": "Gender", "type": "nominal"},
            {"field": "value", "type": "quantitative","title":"Count"},
            {"field": "Percentage", "type": "quantitative", "format": ".1f", "title": "Percentage"}
          ]
        },
        "title": "Western Australia"
      }
    ],
    "config": { "title": { "font": "sans-serif", "fontSize": 16 },
                "axis": {"labelFontSize": 9,"titleFontSize": 15},
                "padding": {
                "left": 50,
                "top": 50,
                "right": 50,
                "bottom": 50
                }
              }
  
  }
  